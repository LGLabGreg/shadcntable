---
title: DataTable Manual Pagination Example
description: Example of manual/server-side pagination using the DataTable component with rowCount.
---

## Overview

This example shows how to use the DataTable with **manual/server-side pagination**.
The table controls (next/previous page, page size selector) are fully wired to an external pagination state and a data-fetching function, similar to the TanStack Table
[controlled pagination example](https://tanstack.com/table/v8/docs/framework/react/examples/pagination-controlled).

## Example: Users table with server-side pagination

```tsx
'use client'

import { keepPreviousData, useQuery } from '@tanstack/react-query'
import { type ColumnDef } from '@tanstack/react-table'
import { useState } from 'react'

import { DataTable } from '@/components/shadcntable/data-table'
import { DataTableColumnHeader } from '@/components/shadcntable/data-table-column-header'

type User = {
  id: string
  name: string
  email: string
}

type UsersResponse = {
  rows: User[]
  rowCount: number
}

const columns: ColumnDef<User>[] = [
  {
    accessorKey: 'name',
    header: ({ column }) => <DataTableColumnHeader column={column} title='Name' />,
  },
  {
    accessorKey: 'email',
    header: ({ column }) => <DataTableColumnHeader column={column} title='Email' />,
  },
]

async function fetchUsers(pagination: { pageIndex: number; pageSize: number }) {
  const params = new URLSearchParams({
    page: String(pagination.pageIndex + 1),
    pageSize: String(pagination.pageSize),
  })

  const res = await fetch(`/api/users?${params.toString()}`)
  if (!res.ok) {
    throw new Error('Failed to fetch users')
  }

  return (await res.json()) as UsersResponse
}

export function UsersTableManualPagination() {
  const [pagination, setPagination] = useState({
    pageIndex: 0,
    pageSize: 10,
  })

  const { data, isLoading } = useQuery({
    queryKey: ['users', pagination],
    queryFn: () => fetchUsers(pagination),
    placeholderData: keepPreviousData,
  })

  const rows = data?.rows ?? []
  const rowCount = data?.rowCount ?? 0

  return (
    <DataTable
      columns={columns}
      data={rows}
      isLoading={isLoading}
      pagination={{
        manual: true,
        pageIndex: pagination.pageIndex,
        pageSize: pagination.pageSize,
        rowCount,
        onPaginationChange: setPagination,
      }}
      toolbar={{
        search: true,
        viewOptions: true,
      }}
    />
  )
}
```

You can adapt this pattern to any backend or data source:

- **`pagination` state** lives in your component.
- The **query function** uses `pageIndex` and `pageSize` to fetch the current page and return `rows` plus `rowCount`.
- The DataTable runs in **manual mode** and calls your single `onPaginationChange` callback whenever the user changes page or page size.
